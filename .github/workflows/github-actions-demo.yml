name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions üöÄ
on: [push]
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2
        with:
          token: ${{ secrets.PAT }} # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PAT –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

      - name: Install PHP dependencies
        run: composer install --prefer-dist --no-scripts --no-progress --no-suggest

      - name: Install Node.js dependencies
        run: npm install

      - name: Build
        run: npm run build

      - name: Deploy to server via SSH
        uses: appleboy/ssh-action@master
        with:
          host: sc527094.ftp.tools
          username: sc527094
          password: VkC3L5r74m # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç –¥–ª—è –ø–∞—Ä–æ–ª—è
          port: 22
          script: |
            cd /home/sc527094/calories365.space/calculator
            # –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–∏–ª–∏ –≤–∞—à –ø—É–±–ª–∏—á–Ω—ã–π SSH –∫–ª—é—á –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
            # –ò —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —É –≤–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
            git pull origin main
            # –î–æ–±–∞–≤—å—Ç–µ –∑–¥–µ—Å—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–ø–ª–æ—è, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

#            composer install --no-dev --prefer-dist
#            php artisan migrate --force
#            php artisan config:cache
#            php artisan route:cache
#            php artisan view:cache
#            # –î—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã
