name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions üöÄ
on: [push]
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2

      - name: Install PHP dependencies
        run: composer install --prefer-dist --no-scripts --no-progress --no-suggest

      - name: Install Node.js dependencies
        run: npm install

      - name: Build
        run: npm run build

      - name: Deploy to server via SSH
        uses: appleboy/ssh-action@master
        with:
          host: sc527094.ftp.tools
          username: sc527094
          password: u589Z3KiSt
          port: 22
          script: |
            cd /home/sc527094/calories365.space/calculator
            git pull origin main
            composer install --no-dev --prefer-dist
            php artisan migrate --force
            php artisan config:cache
            php artisan route:cache
            php artisan view:cache
            # –î—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã
